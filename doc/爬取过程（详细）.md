# 解析帖子列表

- 访问第N页（带上已登录cookie）
  - 第1页：https://tieba.baidu.com/f?ie=utf-8&kw=terraria&fr=search
  - 第2页：https://tieba.baidu.com/f?kw=terraria&ie=utf-8&pn=50
- 解析页面，搜索class为"pagelet_html"，id为"pagelet_html_frs-list/pagelet/thread_list"的`<code>`标签（应该只有一个）
- 获取该标签内的注释元素
- 去掉注释首尾的`<!--`和`-->`
- 解析注释的剩余部分，找到所有class为"j_thread_list clearfix"的`<li>`元素（应该有多个）
- 依次解析每个`<li>`元素：
  - 解析`<li>`元素的data_field属性，获取：
    - 帖子id（id）
    - 帖子作者名称（author_name）
  - 解析`<li>`元素的内容：
    - 找到class为"j_th_tit"的`<a>`元素，获取其title属性（帖子标题）和herf属性（帖子相对于tieba.baidu.com的路径）
    - 找到class为"tb_icon_author"的`<span>`元素，将其data-field作为JSON解析，获取`user_id`成员（主题作者的用户ID）

# 解析帖子

- 访问帖子的第N页（带上已登录cookie）
  - 第1页：https://tieba.baidu.com/p/5837869242
  - 第2页：/p/5837869242?pn=2
- 帖子当前页数与总页数： PageData.pager 或者 `<li class="l_pager pager_theme_4 pb_list_pager">`
- 楼层列表：`<div class="p_postlist" id="j_p_postlist">`
- 楼层内容：楼层列表内的`<div class="l_post l_post_bright j_l_post clearfix  ">`的data-field，包含：
  - 作者的user_id
  - 作者的user_name
  - 作者的user_nickname
  - 楼层/跟帖的id
  - 楼层内容content
  - 楼层号post_no
  - 序号post_index
  - 楼中楼回复数comment_num
  - 楼中楼显示在外面的回复数is_fold
- 楼层的发表时间：`<div class="post-tail-wrap">`的第3个`<span>`
  - 格式：`2018-08-13 07:01`
- 解析并保存帖子内容中的图片（注意图片的去重，尤其是表情图片，因为一个帖子里可能出现很多重复的表情）
- 获取楼中楼内容：https://tieba.baidu.com/p/comment?tid=[帖子ID]&pid=[楼层ID]&pn=[页码]
  - 楼中楼由若干`<li>`元素组成
  - 回复内容：`<li class="lzl_single_post j_lzl_s_p first_no_border">`
    - `<li>`元素的data-field：
      - 楼中楼ID（spid）
      - 楼中楼作者用户名（user_name）
    - 楼中楼内容`<span class="lzl_content_main"`，去除首位空格字符
    - 楼中楼发表时间`<span class="lzl_time">`
      - 格式：2018-12-2 22:09
  - 页码`<li class="lzl_li_pager j_lzl_l_p lzl_li_pager_s">`
    - `<li>`元素的data-field：
      - 总回复数（total_num）
      - 总页数（total_page）
